function gmwSetCookie(e,t,o){var a=new Date;a.setTime(a.getTime()+24*o*60*60*1e3);var s=escape(encodeURIComponent(t))+(null==o?"":"; expires="+a.toUTCString());document.cookie=e+"="+s+"; path=/"}function gmwGetCookie(e){var t=document.cookie.match("(^|;) ?"+e+"=([^;]*)(;|$)");return t?decodeURIComponent(t[2]):null}function gmwDeleteCookie(e){document.cookie=encodeURIComponent(e)+"=deleted; expires="+new Date(0).toUTCString()}function GmwAutoLocator(e,t){function o(o){var a=new google.maps.Geocoder;a.geocode({latLng:new google.maps.LatLng(o.coords.latitude,o.coords.longitude)},function(o,a){return a==google.maps.GeocoderStatus.OK?(s={status:"success",results:o},e(s)):(s={status:"falied",type:"2",message:a},t(s))})}function a(e){var o;switch(e.code){case e.PERMISSION_DENIED:o="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:o="Location information is unavailable.";break;case 3:o="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:o="An unknown error occurred"}return s={status:"failed",type:"3",message:o},t(s)}var s=!1;return navigator.geolocation?void navigator.geolocation.getCurrentPosition(o,a,{timeout:1e4}):(s={status:"failed",type:"1",message:"Sorry! Geolocation is not supported by this browser."},t(s))}function gmwAddressGeocoder(e,t,o){geocoder=new google.maps.Geocoder,geocoder.geocode({address:e.address,region:e.region},function(e,a){return a==google.maps.GeocoderStatus.OK?t(e):o(a)})}jQuery(document).ready(function(e){function t(e){a(e.results)}function o(t){2==t.type?alert("Geocoder failed due to: "+t.message):alert(t.message),0!=r&&e("#gmw-locator-btn-loader-"+r).fadeToggle("fast",function(){e(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted"),e(".gmw-address").removeAttr("disabled"),e(".gmw-submit").removeAttr("disabled")})}function a(t){var o="",a="",i="",g="",l="",d="",m=t[0].address_components,u=t[0].geometry.location.lat(),c=t[0].geometry.location.lng();gmwSetCookie("gmw_lat",u,7),gmwSetCookie("gmw_lng",c,7),gmwSetCookie("gmw_address",t[0].formatted_address,7),0!=n&&(n.find(".gmw-lat").val(u),n.find(".gmw-lng").val(c));for(x in m)"street_number"==m[x].types&&(o=m[x].long_name,gmwSetCookie("gmw_street_number",o,7)),"route"==m[x].types&&(street_name=m[x].long_name,gmwSetCookie("gmw_street_name",street_name,7),a=0!=o&&""!=o?o+" "+street_name:street_name,gmwSetCookie("gmw_street",a,7)),"administrative_area_level_1,political"==m[x].types&&(g=m[x].short_name,gmwSetCookie("gmw_state",m[x].short_name,7),gmwSetCookie("gmw_state_long",m[x].long_name,7)),"locality,political"==m[x].types&&(i=m[x].short_name,gmwSetCookie("gmw_city",m[x].short_name,7)),"postal_code"==m[x].types&&(l=m[x].short_name,gmwSetCookie("gmw_zipcode",m[x].short_name,7)),"country,political"==m[x].types&&(d=m[x].short_name,gmwSetCookie("gmw_country",m[x].short_name,7),gmwSetCookie("gmw_country_long",m[x].long_name,7));1==s&&location.reload(),e(".locator-submitted")[0]&&(e(".gmw-address").removeAttr("disabled"),e(".gmw-submit").removeAttr("disabled"),n.find(".gmw-address").hasClass("gmw-full-address")?n.find(".gmw-full-address").val(t[0].formatted_address):(n.find(".gmw-saf-street").val(a),n.find(".gmw-saf-city").val(i),n.find(".gmw-saf-state").val(g),n.find(".gmw-saf-zipcode").val(l),n.find(".gmw-saf-country").val(d)),n.find(".gmw-submit").toggleClass("submitted"),n.find(".gmw-lat").val(u),n.find(".gmw-lng").val(c),e("#"+r).hasClass("gmw-locator-submit")?setTimeout(function(){e(".gmw-locator-btn-loader-"+r).fadeToggle("fast",function(){locatorButton.fadeToggle("fast")}),n.find(".gmw-submit").click()},1500):e("#gmw-locator-btn-loader-"+r).fadeToggle("fast",function(){e(".locator-submitted").fadeToggle("fast").removeClass("locator-submitted")}))}e(".gmw-map-loader").fadeOut(1500),jQuery().chosen&&e(".gmw-chosen").chosen(),navigator.geolocation||e(".gmw-locator-btn-wrapper").hide(),e(".gmw-address").focus(function(){e(this).hasClass("gmw-no-address-error")&&e(this).removeClass("gmw-no-address-error")}),e(".gmw-submit").click(function(t){var o=e(t.target);o.is("input")||e(this).closest("form").submit()}),e(".gmw-form input[type='text']").keyup(function(t){13==t.keyCode&&e(this).closest("form").submit()}),e(".gmw-address").keyup(function(){e(this).closest("form").find(".gmw-lat").val(""),e(this).closest("form").find(".gmw-lng").val("")}),jQuery(".gmw-per-page").change(function(){thisValue=jQuery(this).val(),ppValues=jQuery(this).next(),formID=ppValues.attr("data-formid"),totalResults=ppValues.attr("data-totalcount"),paged=ppValues.attr("data-paged"),pageName=ppValues.attr("data-pagename"),urlPx=ppValues.attr("data-urlpx"),gmwPost=ppValues.attr("data-gmwpost"),perPage=ppValues.attr("data-perpage"),lastPage=Math.ceil(totalResults/thisValue),newPaged=paged>lastPage||1==lastPage?lastPage:paged,0==gmwPost?window.location.href=window.location.href+"?"+urlPx+"auto=auto&"+urlPx+"per_page="+thisValue+"&"+urlPx+"form="+formID+"&"+pageName+"="+newPaged:window.location.href=location.href.replace(urlPx+"per_page="+perPage,urlPx+"per_page="+thisValue).replace("&page="+paged,"&"+pageName+"="+newPaged)}),e(".gmw-form").submit(function(t){var o,a=e(this);if(a.find(".gmw-paged").val("1"),a.find(".gmw-address").hasClass("gmw-full-address")?o=a.find(".gmw-full-address").val():(o=[],a.find(".gmw-address").each(function(){o.push(e(this).val())}),o=o.join(" ")),!e.trim(o).length){var s=a.find(".gmw-address");if(s.hasClass("mandatory"))return s.hasClass("gmw-no-address-error")||s.toggleClass("gmw-no-address-error"),!1;a.find(".gmw-submit").addClass("submitted")}return 1!=gmwSettings.general_settings.js_geocode?!0:""!=a.find(".gmw-lat").val()&&""!=a.find(".gmw-lng").val()?!0:a.find(".gmw-submit").hasClass("submitted")?!0:(t.preventDefault(),geocoder=new google.maps.Geocoder,countryCode=gmwSettings.general_settings.country_code,void geocoder.geocode({address:o,region:countryCode},function(e,t){t==google.maps.GeocoderStatus.OK?(a.find(".gmw-submit").addClass("submitted"),a.find(".gmw-lat").val(e[0].geometry.location.lat()),a.find(".gmw-lng").val(e[0].geometry.location.lng()),setTimeout(function(){a.submit()},500)):alert("We could not find the address you entered for the following reason: "+t)}))});var s=!1,n=!1,r=!1;1==gmwSettings.general_settings.auto_locate&&1!=gmwGetCookie("gmw_autolocate")&&(gmwSetCookie("gmw_autolocate",1,1),s=!0,GmwAutoLocator(t,o)),e(".gmw-locate-btn").click(function(){r=e(this).closest("form").find(".gmw-form-id").val(),locatorButton=e(this),n=e(this).closest("form"),n.find(".gmw-lat").val(""),n.find(".gmw-lng").val(""),e(this).toggleClass("locator-submitted"),locatorButton.fadeToggle("fast",function(){e("#gmw-locator-btn-loader-"+r).fadeToggle("fast",function(){e(".gmw-address").attr("disabled","disabled"),e(".gmw-submit").attr("disabled","disabled"),GmwAutoLocator(t,o)})})})});